Feature: API

  Scenario: Request for one company no other parameters yearly

    Given a user is authenticated

    And the following rows are in the "AnnualFullFormatted" table:
      |ticker|name|source|year_ending|earningspersharediluted|earningspersharebasic|earningspersharebasicanddiluted|cashandcashequivalentsatcarryingvalue|cash|cashandduefrombanks|netincomeloss|profitloss|operatingincomeloss|assetscurrent|assets|liabilities|stockholdersequity|stockholdersequityincludingportionattributabletononcontrollinginterest|liabilitiesandstockholdersequity|accountspayablecurrent|accountsreceivablenetcurrent|inventorynet|researchanddevelopmentexpense|
      |AAPL|APPLE INC|https://www.sec.gov/cgi-bin/viewer?action=view&cik=320193&accession_number=0000320193-18-000145&xbrl_type=v|2018-09-29|23.82|24.02||51826000000.0|||119062000000.0||141796000000.0|262678000000.0|731450000000.0|517156000000.0|214294000000.0||731450000000.0|111776000000.0|46372000000.0|7912000000.0|28472000000.0|
      |AAPL|APPLE INC|https://www.sec.gov/cgi-bin/viewer?action=view&cik=320193&accession_number=0000320193-17-000070&xbrl_type=v|2017-09-30|18.42|18.54||40578000000.0|||96702000000.0||122688000000.0|257290000000.0|750638000000.0|482544000000.0|268094000000.0||750638000000.0|98098000000.0|35748000000.0|9710000000.0|23162000000.0|
      |AAPL|APPLE INC|https://www.sec.gov/cgi-bin/viewer?action=view&cik=320193&accession_number=0001628280-16-020309&xbrl_type=v|2016-09-24|16.62|16.7||40968000000.0|||91374000000.0||120048000000.0|213738000000.0|643372000000.0|386874000000.0|256498000000.0||643372000000.0|74588000000.0|31508000000.0|4264000000.0|20090000000.0|
      |AAPL|APPLE INC|https://www.sec.gov/cgi-bin/viewer?action=view&cik=320193&accession_number=0001193125-15-356351&xbrl_type=v|2015-09-26|18.44|18.56||42240000000.0|||106788000000.0||142460000000.0|178756000000.0|580958000000.0|342248000000.0|238710000000.0||580958000000.0|70980000000.0|33698000000.0|4698000000.0|16134000000.0|
      |AAPL|APPLE INC|https://www.sec.gov/cgi-bin/viewer?action=view&cik=320193&accession_number=0001193125-14-383437&xbrl_type=v|2014-09-27|12.9|12.98||27688000000.0|||79020000000.0||105006000000.0|137062000000.0|463678000000.0|240584000000.0|223094000000.0||463678000000.0|60392000000.0|34920000000.0|4222000000.0|12082000000.0|
      |AAPL|APPLE INC|https://www.sec.gov/cgi-bin/viewer?action=view&cik=320193&accession_number=0001193125-13-416534&xbrl_type=v|2013-09-28|79.5|80.06||28518000000.0|||74074000000.0||97998000000.0|146572000000.0|414000000000.0|166902000000.0|247098000000.0||414000000000.0|44734000000.0|26204000000.0|3528000000.0|8950000000.0|
      |AAPL|APPLE INC|https://www.sec.gov/cgi-bin/viewer?action=view&cik=320193&accession_number=0001193125-12-444068&xbrl_type=v|2012-09-29|88.3|89.28||21492000000.0|||83466000000.0||110482000000.0|115306000000.0|352128000000.0|115708000000.0|236420000000.0||352128000000.0|42350000000.0|21860000000.0|1582000000.0|6762000000.0|
      |AAPL|APPLE INC|https://www.sec.gov/cgi-bin/viewer?action=view&cik=320193&accession_number=0001193125-11-282113&xbrl_type=v|2011-09-24|55.36|56.1||19630000000.0|||51844000000.0||67580000000.0|89976000000.0|232742000000.0|79512000000.0|153230000000.0||232742000000.0|29264000000.0|10738000000.0|1552000000.0|4858000000.0|
      |AAPL|APPLE INC|https://www.sec.gov/cgi-bin/viewer?action=view&cik=320193&accession_number=0001193125-10-238044&xbrl_type=v|2010-09-25|30.3|30.82||22522000000.0|3380000000.0||28026000000.0||36770000000.0|83356000000.0|150366000000.0|54784000000.0|95582000000.0||150366000000.0|24030000000.0|11020000000.0|2102000000.0|3564000000.0|
      |AAPL|APPLE INC|https://www.sec.gov/cgi-bin/viewer?action=view&cik=320193&accession_number=0001193125-10-012091&xbrl_type=v|2009-09-26|18.16|18.44||10526000000.0|||16470000000.0||23480000000.0|63110000000.0|95002000000.0|31722000000.0|63280000000.0||95002000000.0|11202000000.0|6722000000.0|910000000.0|2666000000.0|

    When a user requests path "/FY/AAPL"

    Then the following json response is sent:
      """
      [{"source":"https://www.sec.gov/cgi-bin/viewer?action=view&cik=320193&accession_number=0000320193-18-000145&xbrl_type=v","ticker":"AAPL","name":"APPLE INC","year_ending":"2018-09-29","earningspersharediluted":23.82,"earningspersharebasic":24.02,"earningspersharebasicanddiluted":null,"cashandcashequivalentsatcarryingvalue":51826000000.0,"cash":null,"cashandduefrombanks":null,"netincomeloss":119062000000.0,"profitloss":null,"operatingincomeloss":141796000000.0,"assetscurrent":262678000000.0,"assets":731450000000.0,"liabilities":517156000000.0,"stockholdersequity":214294000000.0,"stockholdersequityincludingportionattributabletononcontrollinginterest":null,"liabilitiesandstockholdersequity":731450000000.0,"accountspayablecurrent":111776000000.0,"accountsreceivablenetcurrent":46372000000.0,"inventorynet":7912000000.0,"researchanddevelopmentexpense":28472000000.0},{"source":"https://www.sec.gov/cgi-bin/viewer?action=view&cik=320193&accession_number=0000320193-17-000070&xbrl_type=v","ticker":"AAPL","name":"APPLE INC","year_ending":"2017-09-30","earningspersharediluted":18.42,"earningspersharebasic":18.54,"earningspersharebasicanddiluted":null,"cashandcashequivalentsatcarryingvalue":40578000000.0,"cash":null,"cashandduefrombanks":null,"netincomeloss":96702000000.0,"profitloss":null,"operatingincomeloss":122688000000.0,"assetscurrent":257290000000.0,"assets":750638000000.0,"liabilities":482544000000.0,"stockholdersequity":268094000000.0,"stockholdersequityincludingportionattributabletononcontrollinginterest":null,"liabilitiesandstockholdersequity":750638000000.0,"accountspayablecurrent":98098000000.0,"accountsreceivablenetcurrent":35748000000.0,"inventorynet":9710000000.0,"researchanddevelopmentexpense":23162000000.0},{"source":"https://www.sec.gov/cgi-bin/viewer?action=view&cik=320193&accession_number=0001628280-16-020309&xbrl_type=v","ticker":"AAPL","name":"APPLE INC","year_ending":"2016-09-24","earningspersharediluted":16.62,"earningspersharebasic":16.7,"earningspersharebasicanddiluted":null,"cashandcashequivalentsatcarryingvalue":40968000000.0,"cash":null,"cashandduefrombanks":null,"netincomeloss":91374000000.0,"profitloss":null,"operatingincomeloss":120048000000.0,"assetscurrent":213738000000.0,"assets":643372000000.0,"liabilities":386874000000.0,"stockholdersequity":256498000000.0,"stockholdersequityincludingportionattributabletononcontrollinginterest":null,"liabilitiesandstockholdersequity":643372000000.0,"accountspayablecurrent":74588000000.0,"accountsreceivablenetcurrent":31508000000.0,"inventorynet":4264000000.0,"researchanddevelopmentexpense":20090000000.0},{"source":"https://www.sec.gov/cgi-bin/viewer?action=view&cik=320193&accession_number=0001193125-15-356351&xbrl_type=v","ticker":"AAPL","name":"APPLE INC","year_ending":"2015-09-26","earningspersharediluted":18.44,"earningspersharebasic":18.56,"earningspersharebasicanddiluted":null,"cashandcashequivalentsatcarryingvalue":42240000000.0,"cash":null,"cashandduefrombanks":null,"netincomeloss":106788000000.0,"profitloss":null,"operatingincomeloss":142460000000.0,"assetscurrent":178756000000.0,"assets":580958000000.0,"liabilities":342248000000.0,"stockholdersequity":238710000000.0,"stockholdersequityincludingportionattributabletononcontrollinginterest":null,"liabilitiesandstockholdersequity":580958000000.0,"accountspayablecurrent":70980000000.0,"accountsreceivablenetcurrent":33698000000.0,"inventorynet":4698000000.0,"researchanddevelopmentexpense":16134000000.0},{"source":"https://www.sec.gov/cgi-bin/viewer?action=view&cik=320193&accession_number=0001193125-14-383437&xbrl_type=v","ticker":"AAPL","name":"APPLE INC","year_ending":"2014-09-27","earningspersharediluted":12.9,"earningspersharebasic":12.98,"earningspersharebasicanddiluted":null,"cashandcashequivalentsatcarryingvalue":27688000000.0,"cash":null,"cashandduefrombanks":null,"netincomeloss":79020000000.0,"profitloss":null,"operatingincomeloss":105006000000.0,"assetscurrent":137062000000.0,"assets":463678000000.0,"liabilities":240584000000.0,"stockholdersequity":223094000000.0,"stockholdersequityincludingportionattributabletononcontrollinginterest":null,"liabilitiesandstockholdersequity":463678000000.0,"accountspayablecurrent":60392000000.0,"accountsreceivablenetcurrent":34920000000.0,"inventorynet":4222000000.0,"researchanddevelopmentexpense":12082000000.0},{"source":"https://www.sec.gov/cgi-bin/viewer?action=view&cik=320193&accession_number=0001193125-13-416534&xbrl_type=v","ticker":"AAPL","name":"APPLE INC","year_ending":"2013-09-28","earningspersharediluted":79.5,"earningspersharebasic":80.06,"earningspersharebasicanddiluted":null,"cashandcashequivalentsatcarryingvalue":28518000000.0,"cash":null,"cashandduefrombanks":null,"netincomeloss":74074000000.0,"profitloss":null,"operatingincomeloss":97998000000.0,"assetscurrent":146572000000.0,"assets":414000000000.0,"liabilities":166902000000.0,"stockholdersequity":247098000000.0,"stockholdersequityincludingportionattributabletononcontrollinginterest":null,"liabilitiesandstockholdersequity":414000000000.0,"accountspayablecurrent":44734000000.0,"accountsreceivablenetcurrent":26204000000.0,"inventorynet":3528000000.0,"researchanddevelopmentexpense":8950000000.0},{"source":"https://www.sec.gov/cgi-bin/viewer?action=view&cik=320193&accession_number=0001193125-12-444068&xbrl_type=v","ticker":"AAPL","name":"APPLE INC","year_ending":"2012-09-29","earningspersharediluted":88.3,"earningspersharebasic":89.28,"earningspersharebasicanddiluted":null,"cashandcashequivalentsatcarryingvalue":21492000000.0,"cash":null,"cashandduefrombanks":null,"netincomeloss":83466000000.0,"profitloss":null,"operatingincomeloss":110482000000.0,"assetscurrent":115306000000.0,"assets":352128000000.0,"liabilities":115708000000.0,"stockholdersequity":236420000000.0,"stockholdersequityincludingportionattributabletononcontrollinginterest":null,"liabilitiesandstockholdersequity":352128000000.0,"accountspayablecurrent":42350000000.0,"accountsreceivablenetcurrent":21860000000.0,"inventorynet":1582000000.0,"researchanddevelopmentexpense":6762000000.0},{"source":"https://www.sec.gov/cgi-bin/viewer?action=view&cik=320193&accession_number=0001193125-11-282113&xbrl_type=v","ticker":"AAPL","name":"APPLE INC","year_ending":"2011-09-24","earningspersharediluted":55.36,"earningspersharebasic":56.1,"earningspersharebasicanddiluted":null,"cashandcashequivalentsatcarryingvalue":19630000000.0,"cash":null,"cashandduefrombanks":null,"netincomeloss":51844000000.0,"profitloss":null,"operatingincomeloss":67580000000.0,"assetscurrent":89976000000.0,"assets":232742000000.0,"liabilities":79512000000.0,"stockholdersequity":153230000000.0,"stockholdersequityincludingportionattributabletononcontrollinginterest":null,"liabilitiesandstockholdersequity":232742000000.0,"accountspayablecurrent":29264000000.0,"accountsreceivablenetcurrent":10738000000.0,"inventorynet":1552000000.0,"researchanddevelopmentexpense":4858000000.0},{"source":"https://www.sec.gov/cgi-bin/viewer?action=view&cik=320193&accession_number=0001193125-10-238044&xbrl_type=v","ticker":"AAPL","name":"APPLE INC","year_ending":"2010-09-25","earningspersharediluted":30.3,"earningspersharebasic":30.82,"earningspersharebasicanddiluted":null,"cashandcashequivalentsatcarryingvalue":22522000000.0,"cash":3380000000.0,"cashandduefrombanks":null,"netincomeloss":28026000000.0,"profitloss":null,"operatingincomeloss":36770000000.0,"assetscurrent":83356000000.0,"assets":150366000000.0,"liabilities":54784000000.0,"stockholdersequity":95582000000.0,"stockholdersequityincludingportionattributabletononcontrollinginterest":null,"liabilitiesandstockholdersequity":150366000000.0,"accountspayablecurrent":24030000000.0,"accountsreceivablenetcurrent":11020000000.0,"inventorynet":2102000000.0,"researchanddevelopmentexpense":3564000000.0},{"source":"https://www.sec.gov/cgi-bin/viewer?action=view&cik=320193&accession_number=0001193125-10-012091&xbrl_type=v","ticker":"AAPL","name":"APPLE INC","year_ending":"2009-09-26","earningspersharediluted":18.16,"earningspersharebasic":18.44,"earningspersharebasicanddiluted":null,"cashandcashequivalentsatcarryingvalue":10526000000.0,"cash":null,"cashandduefrombanks":null,"netincomeloss":16470000000.0,"profitloss":null,"operatingincomeloss":23480000000.0,"assetscurrent":63110000000.0,"assets":95002000000.0,"liabilities":31722000000.0,"stockholdersequity":63280000000.0,"stockholdersequityincludingportionattributabletononcontrollinginterest":null,"liabilitiesandstockholdersequity":95002000000.0,"accountspayablecurrent":11202000000.0,"accountsreceivablenetcurrent":6722000000.0,"inventorynet":910000000.0,"researchanddevelopmentexpense":2666000000.0}]
      """
